$(function(){function e(){$("#calender").calendar({validator:CalValidate}),setTimeout(e,15e3)}function t(e,t){var a=new Date,l=a.getFullYear(),i=a.getMonth()+1,o=a.getDate(),n=l+"-"+(10>i?"0"+i:i)+"-"+(10>o?"0"+o:o);return t.date>n?'<span style="color:#000;">Not Yet</span>':'<span style="color:#000;">Gone</span>'}function a(e,t){var a=new Date,l=a.getFullYear(),i=a.getMonth()+1,o=a.getDate(),n=l+"-"+(10>i?"0"+i:i)+"-"+(10>o?"0"+o:o);return t.date>n?"background-color:orange;color:#000;opacity:0.9;font-weight:bold;":"background-color:green;color:#000;opacity:0.9;font-weight:bold;"}$("#leave-app").window({iconCls:"icon-leave",maximized:!0,fit:!0,draggable:!1,collapsible:!1,maximizable:!1,minimizable:!1,closable:!1,title:"GAR 2 LEAVE APPLICATION APP"}),$("#projectCombo").combobox({url:"projects",method:"get",valueField:"project_Name",textField:"project_Name",panelHeight:"auto"}),$("#agentCombo").combobox({url:"agents",method:"get",valueField:"agent_ID",textField:"agent_Name",panelHeight:"auto"}),now=new Date,month=now.getMonth()+1,$("#calender").calendar({firstDay:1,validator:CalValidate}),$("#dataGrid").datagrid({title:"Display Grid",fit:!0,rownumbers:!0,striped:!0,remoteSort:!0,toolbar:"#tb",singleSelect:!0,collapsible:!0,nowrap:!0,fitColumns:!0,url:"leave",pageNumber:1,pageSize:30,method:"get",columns:[[{field:"leave_ID",title:"id",hidden:!0},{field:"date",title:"Leave Date",width:100,sortable:!0},{field:"agent_ID",title:"Agent ID",width:80,align:"left"},{field:"agent_Name",title:"Agent Name",width:100,sortable:!0},{field:"project_Name",title:"Project Name",width:100,sortable:!0},{field:"created_at",title:"Status",width:50,formatter:t,styler:a}]],groupField:"agent_Name",view:groupview,pagination:!0,pageSize1:50,groupFormatter:function(e,t){return e+" { Total: "+t.length+" - Remaining: "+(21-t.length)+" }"},rowStyler:function(e,t){var a=new Date,l=a.getFullYear(),i=a.getMonth()+1,o=a.getDate(),n=l+"-"+(10>i?"0"+i:i)+"-"+(10>o?"0"+o:o);return t.date>n?void 0:"background-color:rgba(21, 21, 21, 0.04);color:#000;opacity:0.4;font-weight:bold;"},onClickRow:function(e,t){var a=new Date,l=a.getFullYear(),i=a.getMonth()+1,o=a.getDate(),n=l+"-"+(10>i?"0"+i:i)+"-"+(10>o?"0"+o:o);t.date>n&&$(".c3").linkbutton("enable")}}),e(),$("#AgentDataGrid").datagrid({title:"Registered Agents",fit:!0,rownumbers:!0,striped:!0,remoteSort:!0,singleSelect:!0,collapsible:!0,nowrap:!0,fitColumns:!0,url:"agents",method:"get",columns:[[{field:"agent_ID",title:"Agent ID",width:80,align:"left"},{field:"agent_Name",title:"Agent Name",width:100,sortable:!0},{field:"project_Name",title:"Project Name",width:100,sortable:!0}]],pagination:!0,pageSize1:20});var l=$("#dataGrid").datagrid({filterBtnIconCls:"icon-filter"});l.datagrid("enableFilter",[{field:"created_at",type:"textbox"}]);var i=$("#AgentDataGrid").datagrid({filterBtnIconCls:"icon-filter"});i.datagrid("enableFilter")});