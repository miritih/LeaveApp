function CancelLeave(){form="#U-delete";var e=$("#dataGrid").datagrid("getSelected"),t=new Date,a=t.getFullYear(),o=t.getMonth()+1,l=t.getDate(),r=$("#leaveFrm").find('input[name="agent"]').val(),i=a+"-"+(10>o?"0"+o:o)+"-"+(10>l?"0"+l:l);return e.date>i?e.agent_ID!=r?($(".c3").linkbutton("disable"),$.messager.alert("Error!!","Not your leave day!, You cannot cancel."),!1):null==e?($.messager.alert("Error!!","select record first"),!1):(url="leave/delete",$(".c3").linkbutton("disable"),void $.messager.confirm("Confirm","Are you sure you want to Cancel This leave day??",function(t){t&&($.messager.progress({title:"please wait",msg:"Deleting......"}),$(form).form("submit",{url:url,onSubmit:function(t){t.id=e.leave_ID;var a=$(this).form("validate");return a?void 0:($.messager.progress("close"),a)},success:function(e){var t=JSON.parse(e);$.messager.progress("close"),"success"==t.status?($("#calender").calendar({validator:CalValidate}),$("#dataGrid").datagrid("reload"),$.messager.show({title:t.status,msg:t.msg,modal:!0,timeout:500,showType:"slide",style:{right:"",top:document.body.scrollTop+document.documentElement.scrollTop,bottom:""}})):"Error"==t.status&&$.messager.alert({title:t.status,msg:t.msg,timeout:500,showType:"fade"})}}))})):($(".c3").linkbutton("disable"),$.messager.alert("Error!!","Cannot cancel this day! Leave day already passed"),!1)}$(window).load(function(){$(".loader").fadeOut("slow"),setTimeout(function(){CalValidate()},5e3)}),$(function(){$("#agentCombo").combobox({disabled:!0}),$("#projectCombo").combobox({onSelect:function(){$("#agentCombo").combobox({disabled:!1})}}),$("#calender").calendar({onSelect:function(e){$("#leaveFrm").form("submit",{url:"save",onSubmit:function(t){var a=e.getFullYear(),o=e.getMonth()+1,l=e.getDate(),r=a+"-"+(10>o?"0"+o:o),i=a+"-"+(10>o?"0"+o:o)+"-"+(10>l?"0"+l:l),n=$(this).form("validate"),d=$(this).find('input[name="project"]').val(),g=$(this).find('input[name="agent"]').val();return t.date=i,t.project=d,t.agent=g,t.month=r,t.qter=o,$.messager.progress({title:"Please wait",msg:"Sending Request...."}),n?($.messager.confirm("Confirm Details","Leave Date: <b>"+i+"</b><br>Agent ID: <b>"+g+"</b><br>Project: <b>"+d+"</b>",function(e){e?$.post("save",t,function(e){$.messager.progress("close"),console.log(e.status),"success"==e.status?($.messager.progress("close"),$.messager.show({title:e.status,msg:e.msg,icon:"info",modal:!0,timeout:500,showType:"fade",style:{right:"",top:document.body.scrollTop+document.documentElement.scrollTop,bottom:""}}),$("#calender").calendar({validator:CalValidate}),$("#dataGrid").datagrid("reload")):"Error"==e.status&&($.messager.progress("close"),console.log(e),$.messager.alert({title:e.status,msg:e.msg,icon:"error",timeout:500,showType:"fade"}))}):$.messager.progress("close")}),!1):($.messager.progress("close"),$.messager.alert("Error!","Please select your name and Project first!!","error"),n)}})}})});